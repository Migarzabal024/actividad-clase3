<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Conceptos con React</title>
  <link rel="stylesheet" href="styles.css"> <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
  <div class="container">
    <header>
      <h1>ðŸ“š Conceptos (Renderizado con ReactJS)</h1>
    </header>

    <main id="root"></main>

  </div>

  <script type="text/babel">

    // Componente para una tarjeta de concepto
    function ConceptoCard({ concepto }) {
      return (
        <div className="concepto-card">
          <div className="concepto-header">
            <h3>{concepto.nombre}</h3>
          </div>
          <p className="concepto-descripcion">{concepto.descripcion}</p>
        </div>
      );
    }

    // Componente principal de la App
    function App() {
      const [conceptos, setConceptos] = React.useState([]);
      const [loading, setLoading] = React.useState(true);

      // useEffect se ejecuta cuando el componente se monta
      React.useEffect(() => {
        // Hacemos el fetch a NUESTRA API
        fetch('http://localhost:3000/api/conceptos')
          .then(res => res.json())
          .then(data => {
            setConceptos(data);
            setLoading(false);
          })
          .catch(err => console.error(err));
      }, []); // El [] vacÃ­o asegura que solo se ejecute una vez

      if (loading) {
        return <p className="loading">Cargando conceptos...</p>;
      }

      return (
        <div className="conceptos-grid">
          {conceptos.map(c => (
            <ConceptoCard key={c.id} concepto={c} />
          ))}
        </div>
      );
    }

    // Renderizar la App en el div #root
    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);

  </script>
</body>
</html>