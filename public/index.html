<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gesti√≥n de Conceptos - TP Programaci√≥n 2</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üìö Gesti√≥n de Conceptos</h1>
            <p>Taller de Programaci√≥n 2 - Franco Borsani</p>
        </header>

        <nav>
            <a href="index.html" class="active">Agregar Concepto</a>
            <a href="view.html">Ver Conceptos</a>
        </nav>

        <main>
            <section class="form-section">
                <h2>Agregar Nuevo Concepto</h2>
                
                <form id="formConcepto">
                    <div class="form-group">
                        <label for="nombre">Nombre del Concepto:</label>
                        <input 
                            type="text" 
                            id="nombre" 
                            name="nombre" 
                            placeholder="Ej: API REST" 
                            required
                        >
                    </div>

                    <div class="form-group">
                        <label for="descripcion">Descripci√≥n:</label>
                        <textarea 
                            id="descripcion" 
                            name="descripcion" 
                            rows="5" 
                            placeholder="Describe el concepto..."
                            required
                        ></textarea>
                    </div>

                    <button type="submit" class="btn-primary">Guardar Concepto</button>
                </form>

                <div id="mensaje" class="mensaje"></div>
            </section>
        </main>

        <footer>
            <p>Trabajo Pr√°ctico N¬∞1 - 2025</p>
        </footer>
    </div>

    <script>
        // Capturar el formulario
        const form = document.getElementById('formConcepto');
        const mensajeDiv = document.getElementById('mensaje');

        // Manejar el env√≠o del formulario
        form.addEventListener('submit', async (e) => {
            e.preventDefault();

            // Obtener valores del formulario
            const nombre = document.getElementById('nombre').value;
            const descripcion = document.getElementById('descripcion').value;

            try {
                // Enviar petici√≥n POST al servidor
                const response = await fetch('http://localhost:3000/api/conceptos', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ nombre, descripcion })
                });

                const data = await response.json();

                if (response.ok) {
                    // Mostrar mensaje de √©xito
                    mostrarMensaje('‚úÖ Concepto guardado exitosamente', 'success');
                    
                    // Limpiar formulario
                    form.reset();
                } else {
                    mostrarMensaje('‚ùå Error: ' + data.error, 'error');
                }
            } catch (error) {
                mostrarMensaje('‚ùå Error de conexi√≥n con el servidor', 'error');
                console.error('Error:', error);
            }
        });

        // Funci√≥n para mostrar mensajes
        function mostrarMensaje(texto, tipo) {
            mensajeDiv.textContent = texto;
            mensajeDiv.className = 'mensaje ' + tipo;
            mensajeDiv.style.display = 'block';

            // Ocultar mensaje despu√©s de 3 segundos
            setTimeout(() => {
                mensajeDiv.style.display = 'none';
            }, 3000);
        }
    </script>
</body>
</html>